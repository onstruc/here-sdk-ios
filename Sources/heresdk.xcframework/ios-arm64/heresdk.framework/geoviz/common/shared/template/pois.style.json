{"styles": [{"id": "pois", "layer": "tilezen_points", "when": ["all", ["ref", "Is.POI.Layer"], ["==", ["ref", "POI.Icon.Lookup.MapDisplayFlag"], "yes"], ["any", ["!", ["ref", "Is.POI.TransitStopType.Any"]], ["all", ["ref", "Is.POI.TransitStopType.Any"], ["ref", "Is.POI.TransitAccess"]]], ["!", ["ref", "Is.ExitInfo.Layer"]], ["!", ["ref", "Is.POI.MountainPeak"]], ["!", ["all", ["get", "has_traffic_lights"], ["!has", "source"]]], ["ref", "POI.Display.Enabled"]], "technique": "icon-text", "description": "POIs with PDS category", "attr": {"category": ["match", ["ref", "POI.Icon.Lookup.Group"], "Public Transport", ["ref", "POI.TransitStop.Label.Category"], "National Importance Airport", "national-importance-airport-labels", "National Importance POI", "national-importance-poi-labels", "poi-labels"], "margin": ["ppi-scale", ["ref", "Default.Margin"], ["ref", "ScalePPI.Labels"]], "persisting-margin-reducing": ["ppi-scale", ["ref", "Default.PersistingMargin.Reducing"], ["ref", "ScalePPI.Labels"]], "icon-placement": "T", "replaceable": true, "new-label-spread-frames": 10, "fade-time": 0.3, "far-threshold": 0.8, "far-threshold-range": 0.015, "break-line": true, "perspective-scale-min": ["ref", "Icon.PerspectiveScaling.Min"], "perspective-scale-max": ["ref", "Icon.PerspectiveScaling.Max"], "font": ["ref", "Default.Font"], "text-size": ["case", ["ref", "POI.Display.Selection"], ["ppi-scale", ["match", ["ref", "POI.Icon.Lookup.Group"], ["Public Transport", "National Importance Airport", "Transport Access"], ["ref", "POI.TransitStop.Label.Size"], ["ref", "POI.Label.Size"]], ["ref", "ScalePPI.Labels"]], 0], "text-outline-width": ["ppi-scale", ["match", ["ref", "POI.Icon.Lookup.Group"], ["Public Transport", "National Importance Airport", "Transport Access"], ["ref", "POI.TransitStop.Label.Outline.Width"], ["ref", "POI.Label.Outline.Width"]], ["ref", "ScalePPI.Labels"]], "text-color": ["match", ["ref", "POI.Icon.Lookup.Group"], ["Public Transport", "National Importance Airport", "Transport Access"], ["contrast", ["brightness", ["ref", "POI.TransitStop.Label.Color"], ["ref", "POI.Label.Color.Brightness"]], ["ref", "POI.Label.Color.Contrast"]], ["match", ["ref", "POI.Icon.Lookup.HereCategoryClass"], "accomodation", ["contrast", ["brightness", ["ref", "POI.Accomodation.Label.Color"], ["ref", "POI.Label.Color.Brightness"]], ["ref", "POI.Label.Color.Contrast"]], "automotive", ["contrast", ["brightness", ["ref", "POI.Automotive.Label.Color"], ["ref", "POI.Label.Color.Brightness"]], ["ref", "POI.Label.Color.Contrast"]], "business-services-areas", ["contrast", ["brightness", ["ref", "POI.BusinessServicesAreas.Label.Color"], ["ref", "POI.Label.Color.Brightness"]], ["ref", "POI.Label.Color.Contrast"]], "eat-drink", ["contrast", ["brightness", ["ref", "POI.EatDrink.Label.Color"], ["ref", "POI.Label.Color.Brightness"]], ["ref", "POI.Label.Color.Contrast"]], "emergency", ["contrast", ["brightness", ["ref", "POI.Emergency.Label.Color"], ["ref", "POI.Label.Color.Brightness"]], ["ref", "POI.Label.Color.Contrast"]], "entertainment", ["contrast", ["brightness", ["ref", "POI.Entertainment.Label.Color"], ["ref", "POI.Label.Color.Brightness"]], ["ref", "POI.Label.Color.Contrast"]], "facilities", ["contrast", ["brightness", ["ref", "POI.Facilities.Label.Color"], ["ref", "POI.Label.Color.Brightness"]], ["ref", "POI.Label.Color.Contrast"]], "leisure-outdoor", ["contrast", ["brightness", ["ref", "POI.LeisureOutdoor.Label.Color"], ["ref", "POI.Label.Color.Brightness"]], ["ref", "POI.Label.Color.Contrast"]], "shopping", ["contrast", ["brightness", ["ref", "POI.Shopping.Label.Color"], ["ref", "POI.Label.Color.Brightness"]], ["ref", "POI.Label.Color.Contrast"]], "sights-museum", ["contrast", ["brightness", ["ref", "POI.SightsMuseum.Label.Color"], ["ref", "POI.Label.Color.Brightness"]], ["ref", "POI.Label.Color.Contrast"]], "public-transport", ["contrast", ["brightness", ["ref", "POI.TransitStop.Label.Color"], ["ref", "POI.Label.Color.Brightness"]], ["ref", "POI.Label.Color.Contrast"]], "logistics", ["contrast", ["brightness", ["ref", "POI.Logistics.Label.Color"], ["ref", "POI.Label.Color.Brightness"]], ["ref", "POI.Label.Color.Contrast"]], "generic", ["contrast", ["brightness", ["ref", "POI.Generic.Label.Color"], ["ref", "POI.Label.Color.Brightness"]], ["ref", "POI.Label.Color.Contrast"]], ["contrast", ["brightness", ["ref", "POI.Generic.Label.Color"], ["ref", "POI.Label.Color.Brightness"]], ["ref", "POI.Label.Color.Contrast"]]]], "text-outline-color": ["match", ["ref", "POI.Icon.Lookup.Group"], ["Public Transport", "National Importance Airport", "Transport Access"], ["contrast", ["brightness", ["ref", "POI.TransitStop.Label.Outline.Color"], ["ref", "POI.Label.Outline.Color.Brightness"]], ["ref", "POI.Label.Outline.Color.Contrast"]], ["match", ["ref", "POI.Icon.Lookup.HereCategoryClass"], "accomodation", ["contrast", ["brightness", ["ref", "POI.Accomodation.Label.Outline.Color"], ["ref", "POI.Label.Outline.Color.Brightness"]], ["ref", "POI.Label.Outline.Color.Contrast"]], "automotive", ["contrast", ["brightness", ["ref", "POI.Automotive.Label.Outline.Color"], ["ref", "POI.Label.Outline.Color.Brightness"]], ["ref", "POI.Label.Outline.Color.Contrast"]], "business-services-areas", ["contrast", ["brightness", ["ref", "POI.BusinessServicesAreas.Label.Outline.Color"], ["ref", "POI.Label.Outline.Color.Brightness"]], ["ref", "POI.Label.Outline.Color.Contrast"]], "eat-drink", ["contrast", ["brightness", ["ref", "POI.EatDrink.Label.Outline.Color"], ["ref", "POI.Label.Outline.Color.Brightness"]], ["ref", "POI.Label.Outline.Color.Contrast"]], "emergency", ["contrast", ["brightness", ["ref", "POI.Emergency.Label.Outline.Color"], ["ref", "POI.Label.Outline.Color.Brightness"]], ["ref", "POI.Label.Outline.Color.Contrast"]], "entertainment", ["contrast", ["brightness", ["ref", "POI.Entertainment.Label.Outline.Color"], ["ref", "POI.Label.Outline.Color.Brightness"]], ["ref", "POI.Label.Outline.Color.Contrast"]], "facilities", ["contrast", ["brightness", ["ref", "POI.Facilities.Label.Outline.Color"], ["ref", "POI.Label.Outline.Color.Brightness"]], ["ref", "POI.Label.Outline.Color.Contrast"]], "leisure-outdoor", ["contrast", ["brightness", ["ref", "POI.LeisureOutdoor.Label.Outline.Color"], ["ref", "POI.Label.Outline.Color.Brightness"]], ["ref", "POI.Label.Outline.Color.Contrast"]], "shopping", ["contrast", ["brightness", ["ref", "POI.Shopping.Label.Outline.Color"], ["ref", "POI.Label.Outline.Color.Brightness"]], ["ref", "POI.Label.Outline.Color.Contrast"]], "sights-museum", ["contrast", ["brightness", ["ref", "POI.SightsMuseum.Label.Outline.Color"], ["ref", "POI.Label.Outline.Color.Brightness"]], ["ref", "POI.Label.Outline.Color.Contrast"]], "public-transport", ["contrast", ["brightness", ["ref", "POI.TransitStop.Label.Outline.Color"], ["ref", "POI.Label.Outline.Color.Brightness"]], ["ref", "POI.Label.Outline.Color.Contrast"]], "logistics", ["contrast", ["brightness", ["ref", "POI.Logistics.Label.Outline.Color"], ["ref", "POI.Label.Outline.Color.Brightness"]], ["ref", "POI.Label.Outline.Color.Contrast"]], "generic", ["contrast", ["brightness", ["ref", "POI.Generic.Label.Outline.Color"], ["ref", "POI.Label.Outline.Color.Brightness"]], ["ref", "POI.Label.Outline.Color.Contrast"]], ["contrast", ["brightness", ["ref", "POI.Generic.Label.Outline.Color"], ["ref", "POI.Label.Outline.Color.Brightness"]], ["ref", "POI.Label.Outline.Color.Contrast"]]]], "leading-space": ["ppi-scale", ["ref", "POI.Label.Leading"], ["ref", "ScalePPI.Labels"]], "icon-height": ["case", ["ref", "POI.Display.Selection"], ["case", ["==", ["ref", "POI.Icon.Lookup.IconMaxLevel"], 0], 0, ["match", ["ref", "POI.Icon.Lookup.Group"], ["Public Transport", "National Importance Airport"], ["ref", "Internal.POI.TransitStop.IconSize"], "Transport Access", ["ref", "Internal.POI.TransitAccess.IconSize"], ["ref", "Internal.POI.IconSize"]]], 0], "icon-dx": 0, "icon-dy": ["match", ["ref", "POI.Icon.Lookup.Group"], ["Public Transport", "National Importance Airport"], ["/", ["-", ["*", ["ref", "Internal.POI.TransitStop.IconSize"], ["interpolate", ["linear"], ["tilt"], 0, ["ref", "POI.TransitStop.Icon.AnchorPoint.TopDown"], 45, ["ref", "POI.TransitStop.Icon.AnchorPoint.Tilt"]]]], 2], "Transport Access", ["/", ["-", ["ref", "Internal.POI.TransitAccess.IconSize"]], 2], ["/", ["-", ["*", ["ref", "Internal.POI.IconSize"], ["interpolate", ["linear"], ["tilt"], 0, ["ref", "POI.Icon.AnchorPoint.TopDown"], 45, ["ref", "POI.Icon.AnchorPoint.Tilt"]]]], 2]], "text-placement": ["case", [">=", ["length", ["concat", ["get", "$localized-name"], ["get", "$secondary-localized-name"]]], 25], "T", "T, R, L"], "text-dx": 0, "text-dy": ["match", ["ref", "POI.Icon.Lookup.Group"], ["Public Transport", "National Importance Airport"], ["ppi-scale", ["ref", "POI.TransitStop.Label.OffsetY"], ["ref", "ScalePPI.Labels"]], "Transport Access", ["ppi-scale", ["ref", "POI.TransitAccess.Label.OffsetY"], ["ref", "ScalePPI.Labels"]], ["ppi-scale", ["ref", "POI.Label.OffsetY"], ["ref", "ScalePPI.Labels"]]], "icon-brightness": ["ref", "POI.Icon.Brightness"], "text-brightness": ["ref", "POI.Label.Brightness"], "icon-shadow-enabled": ["ref", "POI.Icon.Shadow.Enabled"], "icon-shadow-color": ["ref", "Icon.Shadow.Color"], "icon-shadow-blur-radius": ["ref", "Icon.Shadow.BlurRadius"], "icon-shadow-size-increment": ["ref", "POI.Icon.Shadow.SizeIncrement"], "icon-shadow-dx": ["ref", "POI.Icon.Shadow.DistanceX"], "icon-shadow-dy": ["-", ["ref", "POI.Icon.Shadow.DistanceY"]], "icon-shadow-shear-factor-x": ["ref", "Icon.Shadow.ShearFactorX"], "icon-shadow-shear-factor-y": ["ref", "Icon.Shadow.ShearFactorY"], "text-case-conversion": ["ref", "POI.Label.Variant"], "icon-source": ["case", ["all", ["<=", ["zoom"], ["ref", "POI.TransitAccess.MiniIcon.MaxZoomLevel"]], ["==", ["get", "pds_category"], "400-4100-0040"]], "mini_public-transport.svg", ["ref", "POI.Icon.Lookup.FileName"]], "z-order": ["+", ["-", 100000, ["*", ["ref", "POI.Icon.Lookup.Priority"], 10]], ["case", ["get", "quality_score"], ["get", "quality_score"], ["-", 25, ["get", "min_zoom"]]]], "iconMinZoomLevel": ["ref", "POI.Icon.Lookup.IconMinLevel"], "iconMaxZoomLevel": ["ref", "POI.Icon.Lookup.IconMaxLevel"], "textMinZoomLevel": ["ref", "POI.Icon.Lookup.TextMinLevel"], "textMaxZoomLevel": ["ref", "POI.Icon.Lookup.TextMaxLevel"]}}, {"id": "pois_mountainpeaks", "layer": "tilezen_points", "when": ["all", ["ref", "Is.POI.MountainPeak"], ["ref", "POI.Display.Enabled"]], "technique": "icon-text", "description": "Mountain Peaks + Elevation", "attr": {"category": "mountain-peak-labels", "margin": ["ppi-scale", ["ref", "Default.Margin"], ["ref", "ScalePPI.Labels"]], "persisting-margin-reducing": ["ppi-scale", ["ref", "Default.PersistingMargin.Reducing"], ["ref", "ScalePPI.Labels"]], "icon-placement": "T", "replaceable": true, "new-label-spread-frames": 10, "fade-time": 0.3, "far-threshold": 0.8, "far-threshold-range": 0.015, "break-line": true, "perspective-scale-min": ["ref", "Icon.PerspectiveScaling.Min"], "perspective-scale-max": ["ref", "Icon.PerspectiveScaling.Max"], "font": ["ref", "Default.Font"], "text-size": ["ppi-scale", ["ref", "POI.MountainPeak.Label.Size"], ["ref", "ScalePPI.Labels"]], "text-outline-width": ["ppi-scale", ["ref", "POI.MountainPeak.Label.Outline.Width"], ["ref", "ScalePPI.Labels"]], "text": ["case", ["all", ["ref", "MountainPeak.Has.Elevation"], ["!=", ["ref", "MountainPeak.Elevation"], 0]], ["concat", ["get", "$localized-name"], ["case", ["all", ["has", "$secondary-localized-name"], ["!=", ["get", "$localized-name"], ["get", "$secondary-localized-name"]]], ["concat", "\n", ["get", "$secondary-localized-name"]], ""], "\n(", ["ref", "MountainPeak.Elevation"], "m)"], ["default"]], "text-color": ["contrast", ["brightness", ["ref", "POI.MountainPeak.Label.Color"], ["ref", "POI.Label.Color.Brightness"]], ["ref", "POI.Label.Color.Contrast"]], "text-outline-color": ["contrast", ["brightness", ["ref", "POI.MountainPeak.Label.Outline.Color"], ["ref", "POI.Label.Outline.Color.Brightness"]], ["ref", "POI.Label.Outline.Color.Contrast"]], "leading-space": ["ppi-scale", ["ref", "POI.MountainPeak.Label.Leading"], ["ref", "ScalePPI.Labels"]], "icon-height": ["ppi-scale", ["ref", "POI.MountainPeak.Icon.Size"], ["ref", "ScalePPI.Labels"]], "icon-dx": 0, "icon-dy": ["/", ["-", ["ppi-scale", ["ref", "POI.MountainPeak.Icon.Size"], ["ref", "ScalePPI.Labels"]]], 2], "text-placement": "T", "text-dx": 0, "text-dy": ["ppi-scale", ["ref", "POI.MountainPeak.Label.OffsetY"], ["ref", "ScalePPI.Labels"]], "icon-brightness": ["ref", "POI.MountainPeak.Icon.Brightness"], "text-brightness": ["ref", "POI.Label.Brightness"], "icon-shadow-enabled": ["ref", "POI.Icon.Shadow.Enabled"], "icon-shadow-color": ["ref", "Icon.Shadow.Color"], "icon-shadow-blur-radius": ["ref", "Icon.Shadow.BlurRadius"], "icon-shadow-size-increment": ["ref", "POI.Icon.Shadow.SizeIncrement"], "icon-shadow-dx": ["ref", "POI.Icon.Shadow.DistanceX"], "icon-shadow-dy": ["-", ["ref", "POI.Icon.Shadow.DistanceY"]], "icon-shadow-shear-factor-x": ["ref", "Icon.Shadow.ShearFactorX"], "icon-shadow-shear-factor-y": ["ref", "Icon.Shadow.ShearFactorY"], "icon-source": ["ref", "POI.Icon.MountainPeak.Lookup.FileName"], "z-order": ["+", ["-", 100000, ["*", ["ref", "POI.Icon.MountainPeak.Lookup.Priority"], 10]], ["case", ["get", "quality_score"], ["get", "quality_score"], ["-", 25, ["get", "min_zoom"]]]], "iconMinZoomLevel": ["ref", "POI.Icon.MountainPeak.Lookup.IconMinLevel"], "iconMaxZoomLevel": ["ref", "POI.Icon.MountainPeak.Lookup.IconMaxLevel"], "textMinZoomLevel": ["ref", "POI.Icon.MountainPeak.Lookup.TextMinLevel"], "textMaxZoomLevel": ["ref", "POI.Icon.MountainPeak.Lookup.TextMaxLevel"]}}]}